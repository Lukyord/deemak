---
import Layout from "../layouts/Layout.astro";

import { sanityClient } from "sanity:client";

const posts = await sanityClient.fetch(
  `*[_type == "post" && defined(slug)] | order(publishedAt desc)`,
);
---

<Layout title="Welcome to Astro.">
  <main>
    <h1>Welcome to DeeMak</h1>
    <ul>
      {
        posts.map((post: any) => (
          <li>
            <a href={"/posts/" + post.slug.current} class="post-link">
              {post.title}
            </a>
          </li>
        ))
      }
    </ul>
  </main>
</Layout>

<style></style>
